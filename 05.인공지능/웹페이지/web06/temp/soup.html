<div class="py-5">
    <h1 class="text-center mb-5">{{title}}</h1>
    <div class="row">
        <div class="col-12 col-md-6 col-lg-4">
            <form name="frm">
                <div class="input-group">
                    <input name="title" placeholder="영화제목" class="form-control" value="Avatar">
                    <button class="btn btn-success">영화추천</button>
                </div>
            </form>
        </div>
    </div>
    <hr>
    <div id="result" class="row"></div>
    {%raw%}
        <script id="temp_result" type="text/x-handlebars-template">
            {{#each .}}
                <div class="col-2 col-md-3 col-lg-2 mb-2">
                    <div class="card">
                        <div class="card-body">
                            <img src="{{poster}}" width="100%" soup="{{soup}}" title="{{title}}">
                        </div>
                        <div class="card-footer">
                            <div class="title text-truncate">{{title}}</div>
                        </div>
                    </div>
                </div>
            {{/each}}
        </script>
    {%endraw%}
    {%include 'modal1.html'%}
</div>
<script>
    $("#result").on("click", "img", function(){
        const src = $(this).attr('src');
        const soup = $(this).attr("soup")
        const title=$(this).attr("title")

        $("#soup").modal("show");
        
        $("#soup .modal-title").html(title)
        $("#poster").attr("src", src);
        $("#story").html(soup);
    });

    $(frm).on("submit", function(e){
        e.preventDefault();
        const title=$(frm.title).val();
        $.ajax({
            type:"get",
            url:"/soup/data",
            data:{title},
            success:function(data){
                console.log(data)
                const temp=Handlebars.compile($("#temp_result").html())
                $("#result").html(temp(data));
            }
        })
    });
</script>